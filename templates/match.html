{% extends "base.html" %}
{% block content %}

<div class="card">
    <div class="post-title">Match</div>
    {% if users and users|length > 0 %}
    {% for user in users[:3] %}
    <p>User {{ loop.index }}: {{ user.first_name }}</p>
    <div class="card-container">
        <div class="nav-section active card-content">
            <div class="photo" style="background: url('{{ user.profile_pic_url }}') center center / cover no-repeat;">
            </div>
            <div class="info">
                <div class="name-card">{{ user.first_name }}</div>
                <div class="who">{{ user.role }}</div>
                <div class="icons">
                    {% if user.facebook %}
                    <a href="{{ 'https://facebook.com/' + user.facebook if 'facebook.com' not in user.facebook else user.facebook }}"
                        target="_blank">
                        <img src="{{ url_for('static', filename='fb.png') }}" alt="Facebook" class="icon1">
                    </a>
                    {% endif %}
                    {% if user.email %}
                    <a href="mailto:{{ user.email }}">
                        <img src="{{ url_for('static', filename='gmail.png') }}" alt="Gmail" class="icon2">
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="nav-section card-content-two">
            <div class="info-sandp">
                <div class="info-title">Top Skills</div>
                <div class="info-content">
                    {% for skill in user.skills[:3] %}
                    <div class="info-one">{{ skill }}</div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="nav-section card-content-two">
            <div class="info-sandp">
                <div class="info-title">Top Preferences</div>
                <div class="info-content">
                    {% for pref in user.preferences[:3] %}
                    <div class="info-one">{{ pref }}</div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="nav-section card-content-two">
            {% set exp_map = ['Beginner', 'Intermediate', 'Advanced', 'Expert'] %}
            <div class="info-sandp">
                <div class="info-title">Experience Level</div>
                <div class="info-content">
                    {% if user.experience_level %}
                    <div class="info-one">{{ exp_map[user.experience_level - 1] }}</div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="request-icons" style="justify-content: center;">
            <button class="circled-icon-1" data-user-id="{{ user.id }}">
                <span class="material-symbols-outlined close-symbol">close</span>
            </button>
            <button class="circled-icon-2" id="notify-btn" data-recipient-id="{{ user.id }}">
                <span class="material-symbols-outlined check-symbol">check</span>
            </button>
        </div>
    </div>
    {% endfor %}
    {% else %}
    <div class="notifs-empty">
        <span class="material-symbols-outlined empty-symbol">sentiment_dissatisfied</span>
        <div class="oops">Oops!</div>
        <div class="nothing">Nothing to show here at the moment.</div>
    </div>
    {% endif %}
</div>

{% endblock %}